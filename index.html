<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BỘ ĐỀ ÔN IOE K6 SỐ: 07</title>
    <meta name="description" content="Luyện thi tiếng Anh IOE lớp 6 - Bộ đề số 07">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM (Stable v18) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel Standalone (để chạy JSX) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <style>
      body { font-family: 'Nunito', sans-serif; }
      
      .custom-scrollbar::-webkit-scrollbar { width: 8px; }
      .custom-scrollbar::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 4px; }
      .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
      .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
      
      @keyframes fadeIn { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }
      .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
      
      @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
      .animate-slide-up { animation: slideUp 0.4s ease-out forwards; }

      @keyframes bounceShort { 
        0%, 100% { transform: translateY(0); } 
        50% { transform: translateY(-5px); } 
      }
      .animate-bounce-short { animation: bounceShort 1s infinite; }
    </style>
<script type="importmap">
{
  "imports": {
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/"
  }
}
</script>
</head>
<body class="bg-slate-100 text-slate-800 antialiased">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- CONSTANTS & DATA ---
        
        const QuestionType = {
            MULTIPLE_CHOICE: 'MULTIPLE_CHOICE',
            FILL_IN_BLANK: 'FILL_IN_BLANK',
            REARRANGE: 'REARRANGE'
        };

        const GameState = {
            START: 'START',
            PLAYING: 'PLAYING',
            FINISHED: 'FINISHED'
        };

        const cleanUrl = (url) => {
            if (!url) return undefined;
            return url.trim()
                .replace(/\s+/g, '')
                .replace(/res\.ioe\.vnzedu/, 'res.ioe.vn/edu')
                .replace(/res\.ioe\.vii/, 'res.ioe.vn')
                .replace(/res\.ioe\.An/, 'res.ioe.vn')
                .replace(/res\.ioe\.Mi/, 'res.ioe.vn')
                .replace(/res\.ioe\.vm/, 'res.ioe.vn')
                .replace(/Audio\s*mp3/i, 'Audio.mp3')
                .replace(/ImageExam\s*(\d)/, 'ImageExam/$1')
                .replace(/Olympic\s*ExamData/, 'OlympicExamData')
                .replace(/EOlympic\s*ExaniData/, 'EOlympic/ExamData')
                .replace(/EOlympic\s*ExamData/, 'EOlympic/ExamData')
                .replace(/'/g, '')
                .replace(/_xA/g, '')
                .replace(/Audio-mp3/i, 'Audio.mp3')
                .replace(/Audio\. mp3/i, 'Audio.mp3');
        };

        // Dữ liệu 200 câu hỏi (Đã sửa lỗi Q59, Q5, Q77, Q90...)
        const QUIZ_DATA = [
  { id: 1, type: QuestionType.MULTIPLE_CHOICE, questionText: "Which ... is he in? - 6.", options: ["class", "classes", "grade", "the school"], correctAnswer: "grade", explanation: "Dịch: Cậu ấy học khối mấy? - Khối 6." },
  { id: 2, type: QuestionType.FILL_IN_BLANK, questionText: "- A: _ _ your old school big? - B: No, It isn't.", correctAnswer: "Is", explanation: "Câu hỏi Yes/No với động từ to be: Is your old school big?" },
  { id: 3, type: QuestionType.FILL_IN_BLANK, questionText: "Xuan Bac and Tran Thanh are famous co_ _ _ _ _ _ _ in Vietnam.", correctAnswer: "medians", explanation: "Comedians (Diễn viên hài)." },
  { id: 4, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["They’re", "their teacher", "in front of", "the theatre.", "waiting for"], correctAnswer: "They’re waiting for their teacher in front of the theatre.", explanation: "Dịch: Họ đang đợi giáo viên của họ trước nhà hát." },
  { id: 5, type: QuestionType.FILL_IN_BLANK, questionText: "_ _ _ are you doing at school? - I'm doing fine, thanks!", correctAnswer: "How", explanation: "Dịch: Bạn ở trường thế nào? - Tôi ổn, cảm ơn! (Hỏi thăm sức khỏe/tình hình dùng How)." },
  { id: 6, type: QuestionType.MULTIPLE_CHOICE, questionText: "She ... a ball for her boy yesterday.", options: ["buys", "buy", "bought", "is going to buy"], correctAnswer: "bought", explanation: "Yesterday (hôm qua) -> Quá khứ đơn: bought." },
  { id: 7, type: QuestionType.FILL_IN_BLANK, questionText: "It’s the most delight_ _ _ party of my life!", correctAnswer: "ful", explanation: "Delightful (thú vị/vui sướng)." },
  { id: 8, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["will you", "home?", "When", "back", "be"], correctAnswer: "When will you be back home?", explanation: "Dịch: Khi nào bạn sẽ về nhà?" },
  { id: 9, type: QuestionType.MULTIPLE_CHOICE, questionText: "We are going to visit our grandparents ... one week.", options: ["at", "on", "for", "in"], correctAnswer: "for", explanation: "For one week (trong khoảng 1 tuần)." },
  { id: 10, type: QuestionType.MULTIPLE_CHOICE, questionText: "... year is a year in which February has 29 days.", options: ["Rest", "Leap", "Four", "Last"], correctAnswer: "Leap", explanation: "Leap year (Năm nhuận)." },
  { id: 11, type: QuestionType.FILL_IN_BLANK, questionText: "The boy with _ _ _ hair has taken a photo.", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2019/2/22/636864380545701430_Audio.mp3"), correctAnswer: "red", explanation: "Nghe audio: Red hair (tóc đỏ)." },
  { id: 12, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["I want", "she", "to know", "what", "likes."], correctAnswer: "I want to know what she likes.", explanation: "Dịch: Tôi muốn biết cô ấy thích gì." },
  { id: 13, type: QuestionType.MULTIPLE_CHOICE, questionText: "It takes me ... hour to do this work.", options: ["the", "an", "a", "O"], correctAnswer: "an", explanation: "An hour (một giờ - âm h câm)." },
  { id: 14, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["want", "200 grams", "I", "of beef."], correctAnswer: "I want 200 grams of beef.", explanation: "Dịch: Tôi muốn 200 gam thịt bò." },
  { id: 15, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["to seven.", "a quarter", "I", "at", "go to school"], correctAnswer: "I go to school at a quarter to seven.", explanation: "Dịch: Tôi đi học lúc 7 giờ kém 15." },
  { id: 16, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["today?", "What", "the", "is", "date"], correctAnswer: "What is the date today?", explanation: "Dịch: Hôm nay là ngày mấy?" },
  { id: 17, type: QuestionType.FILL_IN_BLANK, questionText: "A: Which _ _ _ _ _ _ does Jane play? - B: She swims and plays badminton.", correctAnswer: "sports", explanation: "Dịch: Jane chơi môn thể thao nào?" },
  { id: 18, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["winter.", "our country", "in", "It's cold"], correctAnswer: "It's cold in our country in winter.", explanation: "Dịch: Trời lạnh ở nước tôi vào mùa đông." },
  { id: 19, type: QuestionType.FILL_IN_BLANK, questionText: "_ _ _ don't we eat out tonight? - Nice idea!", correctAnswer: "Why", explanation: "Why don't we... (Tại sao chúng ta không... - Lời gợi ý)." },
  { id: 20, type: QuestionType.MULTIPLE_CHOICE, questionText: "Let's go fishing ... the morning.", options: ["at", "in", "on", "to"], correctAnswer: "in", explanation: "In the morning." },
  { id: 21, type: QuestionType.MULTIPLE_CHOICE, questionText: "“Right” has similar meaning to", options: ["correct", "wrong", "false", "left"], correctAnswer: "correct", explanation: "Right = Correct (Đúng)." },
  { id: 22, type: QuestionType.MULTIPLE_CHOICE, questionText: "What does Josh like to play?", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2016/2/25/635920004284431998_Audio.mp3"), options: ["guitar", "piano", "violin", "drum"], correctAnswer: "violin", explanation: "Nghe audio." },
  { id: 23, type: QuestionType.MULTIPLE_CHOICE, questionText: "Choose the word that has the underlined part pronounced differently:", options: ["brother", "mother", "come", "police"], correctAnswer: "police", explanation: "Police (/ə/). Các từ còn lại (/ʌ/)." },
  { id: 24, type: QuestionType.FILL_IN_BLANK, questionText: "TOM_ TO", correctAnswer: "A", explanation: "Tomato (Cà chua)." },
  { id: 25, type: QuestionType.MULTIPLE_CHOICE, questionText: "Choose the word whose underlined part is pronounced differently from others:", options: ["favourite", "slight", "fine", "high"], correctAnswer: "favourite", explanation: "Favourite (/ɪ/). Các từ còn lại (/aɪ/)." },
  { id: 26, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["at the moment.", "I’m", "playing", "chess", "with Thu"], correctAnswer: "I’m playing chess with Thu at the moment.", explanation: "Dịch: Tôi đang chơi cờ với Thu ngay lúc này." },
  { id: 27, type: QuestionType.FILL_IN_BLANK, questionText: "The meal we have in the morning is called _ _ _ _ _ _ _ _ _ .", correctAnswer: "breakfast", explanation: "Breakfast (Bữa sáng)." },
  { id: 28, type: QuestionType.FILL_IN_BLANK, questionText: "Wait _ _ _ some minutes. I need to buy some bread.", correctAnswer: "for", explanation: "Wait for (Đợi)." },
  { id: 29, type: QuestionType.FILL_IN_BLANK, questionText: "What _ _ _ _ do your sisters go to bed? - 10pm.", correctAnswer: "time", explanation: "What time (Mấy giờ)." },
  { id: 30, type: QuestionType.FILL_IN_BLANK, questionText: "This is a photo of Miss Kate’s house. To the right of _ _ _ house there is a well.", correctAnswer: "the", explanation: "Dịch: Bên phải ngôi nhà có một cái giếng." },
  { id: 31, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["my second", "your hand", "question.", "Please raise", "to answer"], correctAnswer: "Please raise your hand to answer my second question.", explanation: "Dịch: Hãy giơ tay để trả lời câu hỏi thứ hai của tôi." },
  { id: 32, type: QuestionType.MULTIPLE_CHOICE, questionText: "Choose the word that has the underlined part pronounced differently:", options: ["breakfast", "ready", "eat", "bear"], correctAnswer: "eat", explanation: "'Eat' (/i:/). Các từ còn lại thường phát âm là /e/ (breakfast, ready) hoặc /eə/ (bear)." },
  { id: 33, type: QuestionType.MULTIPLE_CHOICE, questionText: "Students usually work hard ... school and ... home.", options: ["at/at", "in/in", "at/in", "in/Ø"], correctAnswer: "at/at", explanation: "At school (ở trường) và at home (ở nhà)." },
  { id: 34, type: QuestionType.MULTIPLE_CHOICE, questionText: "Where do they play soccer?", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2014/3/14/635303877761027588_Audio.mp3"), options: ["stadium", "schoolyard", "field", "garden"], correctAnswer: "stadium", explanation: "Nghe audio." },
  { id: 35, type: QuestionType.FILL_IN_BLANK, questionText: "Which _ _ _ _ _ _ _ _ do you often speak, English or French?", correctAnswer: "language", explanation: "Language (Ngôn ngữ)." },
  { id: 36, type: QuestionType.FILL_IN_BLANK, questionText: "OF_ EN", correctAnswer: "T", explanation: "Often (Thường)." },
  { id: 37, type: QuestionType.FILL_IN_BLANK, questionText: "FA_ SE", correctAnswer: "L", explanation: "False (Sai)." },
  { id: 38, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["has", "of", "The hotel", "a wonderful view", "the city."], correctAnswer: "The hotel has a wonderful view of the city.", explanation: "Dịch: Khách sạn có tầm nhìn tuyệt vời ra thành phố." },
  { id: 39, type: QuestionType.MULTIPLE_CHOICE, questionText: "Which word has different stress pattern?", options: ["harvest", "surgery", "measure", "relax"], correctAnswer: "relax", explanation: "Relax nhấn âm 2. Các từ còn lại nhấn âm 1." },
  { id: 40, type: QuestionType.MULTIPLE_CHOICE, questionText: "Billions of cans are thrown ... every year all over the world.", options: ["up", "away", "in", "on"], correctAnswer: "away", explanation: "Throw away (vứt đi)." },
  { id: 41, type: QuestionType.MULTIPLE_CHOICE, questionText: "Miss Kerry needs half a ... of oranges.", options: ["kilo", "tube", "bar", "bottle"], correctAnswer: "kilo", explanation: "Half a kilo (nửa cân)." },
  { id: 42, type: QuestionType.MULTIPLE_CHOICE, questionText: "Which sentence is correct?", options: ["Where does your brother John work?", "Where does your John brother work?", "Where does John brother work?", "Where does work your brother John?"], correctAnswer: "Where does your brother John work?", explanation: "Cấu trúc đúng: Where + does + S + V?" },
  { id: 43, type: QuestionType.FILL_IN_BLANK, questionText: "The past form of CALL is _ _ _ _ _ _ .", correctAnswer: "called", explanation: "Quá khứ của Call là Called." },
  { id: 44, type: QuestionType.FILL_IN_BLANK, questionText: "AGA_ N", correctAnswer: "I", explanation: "Again (Lại lần nữa)." },
  { id: 45, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["We had", "a terrible trip", "because", "was unpleasant.", "the weather"], correctAnswer: "We had a terrible trip because the weather was unpleasant.", explanation: "Dịch: Chúng tôi đã có một chuyến đi tồi tệ vì thời tiết khó chịu." },
  { id: 46, type: QuestionType.MULTIPLE_CHOICE, questionText: "How much is a ... of toothpaste?", options: ["can", "bar", "tube", "box"], correctAnswer: "tube", explanation: "Tube of toothpaste (Tuýp kem đánh răng)." },
  { id: 47, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["our hands", "carefully.", "after washing", "have meals", "We will"], correctAnswer: "We will have meals after washing our hands carefully.", explanation: "Dịch: Chúng tôi sẽ ăn sau khi rửa tay cẩn thận." },
  { id: 48, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["me", "please?", "the biscuit", "Can you", "pass"], correctAnswer: "Can you pass me the biscuit please?", explanation: "Dịch: Bạn có thể đưa cho tôi cái bánh quy được không?" },
  { id: 49, type: QuestionType.MULTIPLE_CHOICE, questionText: "What is true about Linda?", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2017/3/2/636240640284640060_Audio.mp3"), options: ["She lives in a small town.", "She comes from America.", "She speaks English.", "She is Elizabeth."], correctAnswer: "She speaks English.", explanation: "Linda thường đến từ Anh hoặc nói tiếng Anh trong các bài nghe." },
  { id: 50, type: QuestionType.MULTIPLE_CHOICE, questionText: "Choose the word whose main stress pattern is not the same as that of the others:", options: ["beautiful", "interesting", "consider", "weatherman"], correctAnswer: "consider", explanation: "Consider nhấn âm 2. Các từ còn lại nhấn âm 1." },
  { id: 51, type: QuestionType.MULTIPLE_CHOICE, questionText: "It rains a lot ... summer.", options: ["in", "on", "at", "to"], correctAnswer: "in", explanation: "In summer (Vào mùa hè)." },
  { id: 52, type: QuestionType.MULTIPLE_CHOICE, questionText: "Which sentence is correct?", options: ["We must keep our school clean.", "We must keep our school cleanly.", "We must keep clean our school.", "We must clean keep our school."], correctAnswer: "We must keep our school clean.", explanation: "Keep + O + adj (Giữ cho cái gì như thế nào)." },
  { id: 53, type: QuestionType.MULTIPLE_CHOICE, questionText: "The opposite of \"healthy\" is \"...\".", options: ["happy", "serious", "sick", "thin"], correctAnswer: "sick", explanation: "Healthy (khỏe mạnh) >< Sick (ốm yếu)." },
  { id: 54, type: QuestionType.FILL_IN_BLANK, questionText: "SA_ SAGE", correctAnswer: "U", explanation: "Sausage (Xúc xích)." },
  { id: 55, type: QuestionType.MULTIPLE_CHOICE, questionText: "Would you like to go there ...?", options: ["with me", "with I", "with she", "with he"], correctAnswer: "with me", explanation: "With + tân ngữ (me)." },
  { id: 56, type: QuestionType.FILL_IN_BLANK, questionText: "What will we eat? - We _ _ _ _ eat cakes and sweets.", correctAnswer: "will", explanation: "Câu trả lời dùng 'will' tương ứng với câu hỏi." },
  { id: 57, type: QuestionType.MULTIPLE_CHOICE, questionText: "Listen and tick:", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2013/11/21/635206399429452724_Audio.mp3"), options: ["He's going to spell a word.", "He's going to give us a poke.", "He's going to have a shock.", "He's going to tell a joke."], correctAnswer: "He's going to tell a joke.", explanation: "Nghe audio." },
  { id: 58, type: QuestionType.FILL_IN_BLANK, questionText: "Amy _ _ _ _ shopping with her mother every Sunday.", correctAnswer: "goes", explanation: "Goes shopping." },
  { id: 59, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["What", "do you study", "in", "class?", "Geography"], correctAnswer: "What do you study in Geography class?", explanation: "Dịch: Bạn học gì trong giờ Địa lý?" },
  { id: 60, type: QuestionType.FILL_IN_BLANK, questionText: "A _ _ _ _ of toothpaste is 5000 VND.", correctAnswer: "tube", explanation: "Tube of toothpaste (Tuýp kem đánh răng)." },
  { id: 61, type: QuestionType.FILL_IN_BLANK, questionText: "I'm very _ _ _ _ _ _ . Can I have something to eat?", correctAnswer: "hungry", explanation: "Hungry (Đói)." },
  { id: 62, type: QuestionType.MULTIPLE_CHOICE, questionText: "I have studied English ... eight months.", options: ["for", "since", "by", "in"], correctAnswer: "for", explanation: "For + khoảng thời gian (thì hiện tại hoàn thành)." },
  { id: 63, type: QuestionType.MULTIPLE_CHOICE, questionText: "Susan is the ... of the two girls.", options: ["prettier", "prettiest", "pretty", "more pretty"], correctAnswer: "prettier", explanation: "So sánh giữa 2 người dùng so sánh hơn (the prettier of the two)." },
  { id: 64, type: QuestionType.FILL_IN_BLANK, questionText: "Give the correct form of the word OLD in the following sentence: Dau Pagoda is the _ _ _ _ _ _ pagoda in our country.", correctAnswer: "oldest", explanation: "So sánh nhất: The oldest." },
  { id: 65, type: QuestionType.FILL_IN_BLANK, questionText: "We are listening _ _ our teacher.", correctAnswer: "to", explanation: "Listen to." },
  { id: 66, type: QuestionType.FILL_IN_BLANK, questionText: "What time _ _ you get up?", correctAnswer: "do", explanation: "What time do you..." },
  { id: 67, type: QuestionType.MULTIPLE_CHOICE, questionText: "Children ... be careful when they cross the road.", options: ["are", "do", "must", "have"], correctAnswer: "must", explanation: "Must (Phải)." },
  { id: 68, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["We usually have", "a", "meals", "day.", "three"], correctAnswer: "We usually have three meals a day.", explanation: "Dịch: Chúng tôi thường ăn 3 bữa một ngày." },
  { id: 69, type: QuestionType.MULTIPLE_CHOICE, questionText: "How old is his mother?", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2014/3/14/635303874830874442_Audio.mp3"), options: ["84", "48", "18", "40"], correctAnswer: "48", explanation: "Nghe audio." },
  { id: 70, type: QuestionType.MULTIPLE_CHOICE, questionText: "Your favorite food is fish. It means ....", options: ["you like fish very much", "you would like some fish now", "you hate eating fish", "you never eat fish"], correctAnswer: "you like fish very much", explanation: "Favorite food = món ăn yêu thích." },
  { id: 71, type: QuestionType.MULTIPLE_CHOICE, questionText: "Playing football, skipping rope and swimming are ... activities.", options: ["after-schools", "school-after", "schooling-after", "after-school"], correctAnswer: "after-school", explanation: "After-school activities (Hoạt động sau giờ học)." },
  { id: 72, type: QuestionType.FILL_IN_BLANK, questionText: "M_ _ _ _ _ _ , the symbol of Singapore, is a creature with the head of a lion and the body of a fish.", correctAnswer: "erlion", explanation: "Merlion (Sư tử biển)." },
  { id: 73, type: QuestionType.MULTIPLE_CHOICE, questionText: "Mr. Baker grows ....", options: ["some vegetables", "some eggs", "some pork", "some beef"], correctAnswer: "some vegetables", explanation: "Chỉ rau mới trồng (grows) được." },
  { id: 74, type: QuestionType.FILL_IN_BLANK, questionText: "How do you go to work? - _ _ bus.", correctAnswer: "By", explanation: "By bus." },
  { id: 75, type: QuestionType.FILL_IN_BLANK, questionText: "YOU_", correctAnswer: "R", explanation: "Your (Của bạn) hoặc Young (Trẻ). Chọn R cho từ ngắn." },
  { id: 76, type: QuestionType.FILL_IN_BLANK, questionText: "A: _ _ _ I help you? - B: Yes, I'd like some beef, please.", correctAnswer: "Can", explanation: "Can I help you?" },
  { id: 77, type: QuestionType.FILL_IN_BLANK, questionText: "How _ _ _ _ kilos of meat do you want?", correctAnswer: "many", explanation: "How many." },
  { id: 78, type: QuestionType.MULTIPLE_CHOICE, questionText: "Choose the word that has the underlined part pronounced differently:", options: ["menu", "red", "eraser", "egg"], correctAnswer: "eraser", explanation: "Eraser (/eɪ/). Các từ còn lại (/e/)." },
  { id: 79, type: QuestionType.FILL_IN_BLANK, questionText: "LE_ TER", correctAnswer: "T", explanation: "Letter (Bức thư)." },
  { id: 80, type: QuestionType.FILL_IN_BLANK, questionText: "What time _ _ they go to school? - 7 o’clock.", correctAnswer: "do", explanation: "What time do they..." },
  { id: 81, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["and join", "the fun.", "I hope", "will come", "you"], correctAnswer: "I hope you will come and join the fun.", explanation: "Dịch: Tôi hy vọng bạn sẽ đến và tham gia vui vẻ." },
  { id: 82, type: QuestionType.MULTIPLE_CHOICE, questionText: "Mary ... the housework every day.", options: ["do", "does", "go", "goes"], correctAnswer: "does", explanation: "Does the housework." },
  { id: 83, type: QuestionType.MULTIPLE_CHOICE, questionText: "Ia is a small ....", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2016/2/25/635920005228086429_Audio.mp3"), options: ["city", "town", "island", "countryside"], correctAnswer: "island", explanation: "Nghe audio." },
  { id: 84, type: QuestionType.FILL_IN_BLANK, questionText: "The Imperial Academy, or Quoc Tu Giam, is the first _ _ _ _ _ _ _ _ _ _ in Vietnam.", correctAnswer: "university", explanation: "University (Trường đại học)." },
  { id: 85, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["on time.", "there", "Our friends", "come", "will"], correctAnswer: "Our friends will come there on time.", explanation: "Dịch: Bạn của chúng tôi sẽ đến đó đúng giờ." },
  { id: 86, type: QuestionType.FILL_IN_BLANK, questionText: "What is _ _ _ weather like in summer?", correctAnswer: "the", explanation: "What is the weather like..." },
  { id: 87, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["food", "a lot of", "We have", "in the fridge."], correctAnswer: "We have a lot of food in the fridge.", explanation: "Dịch: Chúng tôi có rất nhiều đồ ăn trong tủ lạnh." },
  { id: 88, type: QuestionType.MULTIPLE_CHOICE, questionText: "Do you mind if I ... on this chair?", options: ["sit", "sitting", "sat", "to sit"], correctAnswer: "sit", explanation: "Do you mind if I + V(nguyên thể)." },
  { id: 89, type: QuestionType.FILL_IN_BLANK, questionText: "ST_ TION", correctAnswer: "A", explanation: "Station (Nhà ga)." },
  { id: 90, type: QuestionType.FILL_IN_BLANK, questionText: "Listen to the word: _ _ _ _ _ _ _ _ _", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/Thi_cac_cap/2019-2020/Tinh_Thanhpho/L6/nghe/De1/1/adventure.mp3"), correctAnswer: "adventure", explanation: "Nghe audio: Adventure." },
  { id: 91, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["used to.", "than she", "more beautifully", "Now she", "dances"], correctAnswer: "Now she dances more beautifully than she used to.", explanation: "Dịch: Bây giờ cô ấy nhảy đẹp hơn trước đây." },
  { id: 92, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["a call.", "need", "make", "You", "a phone card to"], correctAnswer: "You need a phone card to make a call.", explanation: "Dịch: Bạn cần thẻ điện thoại để gọi điện." },
  { id: 93, type: QuestionType.MULTIPLE_CHOICE, questionText: "Who does Susan get on well with in her family?", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2016/2/25/635920014333908360_Audio.mp3"), options: ["father", "brother", "mother", "sister"], correctAnswer: "mother", explanation: "Nghe audio." },
  { id: 94, type: QuestionType.FILL_IN_BLANK, questionText: "How _ _ _ your last trip to England? - Great!", correctAnswer: "was", explanation: "How was..." },
  { id: 95, type: QuestionType.FILL_IN_BLANK, questionText: "Nick, have you ever taken part in a sports _ _ _ _ _ _ _ _ _ _ _ ?", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/Thi_cac_cap/2019-2020/Tinh_Thanhpho/L6/nghe/De1/2/11.mp3"), correctAnswer: "competition", explanation: "Nghe audio: Competition." },
  { id: 96, type: QuestionType.MULTIPLE_CHOICE, questionText: "Are her ... full or thin?", options: ["teeth", "legs", "feet", "lips"], correctAnswer: "lips", explanation: "Lips (môi) mới dùng tính từ full/thin." },
  { id: 97, type: QuestionType.FILL_IN_BLANK, questionText: "“Pokemon” is a famous Japanese _ _ _ _ _ _ _ in the world.", imageUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2019/2/21/636863176462855944_566X32O.jpg"), correctAnswer: "cartoon", explanation: "Cartoon (Phim hoạt hình)." },
  { id: 98, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["this weekend?", "picnic", "for a", "How about", "going"], correctAnswer: "How about going for a picnic this weekend?", explanation: "Dịch: Cuối tuần này đi dã ngoại nhé?" },
  { id: 99, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["Can you", "English?", "in", "to Mike", "speak"], correctAnswer: "Can you speak to Mike in English?", explanation: "Dịch: Bạn có thể nói chuyện với Mike bằng tiếng Anh không?" },
  { id: 100, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["so the streets", "many new", "shops near here", "are busy and noisy.", "There are"], correctAnswer: "There are many new shops near here so the streets are busy and noisy.", explanation: "Dịch: Có nhiều cửa hàng mới gần đây nên đường phố đông đúc và ồn ào." },
  { id: 101, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["day of the", "Today is", "first school", "the first", "semester."], correctAnswer: "Today is the first school day of the first semester.", explanation: "Dịch: Hôm nay là ngày đi học đầu tiên của học kỳ một." },
  { id: 102, type: QuestionType.MULTIPLE_CHOICE, questionText: "Listen and choose the fruit which IS NOT in the recording.", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2017/3/2/636240656400765312_Audio.mp3"), options: ["oranges", "bananas", "grapes", "apples"], correctAnswer: "grapes", explanation: "Nghe audio." },
  { id: 103, type: QuestionType.MULTIPLE_CHOICE, questionText: "We are ... too much trash.", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2014/3/14/635303884216006926_Audio.mp3"), options: ["producing", "making", "doing", "creating"], correctAnswer: "producing", explanation: "Nghe audio." },
  { id: 104, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["get there and", "the grandma.", "swallowed up", "The wolf ran fast to"], correctAnswer: "The wolf ran fast to get there and swallowed up the grandma.", explanation: "Dịch: Con sói chạy nhanh đến đó và nuốt chửng bà." },
  { id: 105, type: QuestionType.FILL_IN_BLANK, questionText: "William has got one _ _ _ _ _ _ .", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2017/3/2/636240642597457178_Audio.mp3"), correctAnswer: "sister", explanation: "Nghe audio." },
  { id: 106, type: QuestionType.MULTIPLE_CHOICE, questionText: "Be quiet! She ....", options: ["sleeps", "is sleeping", "doesn't sleep", "didn't sleep"], correctAnswer: "is sleeping", explanation: "Be quiet -> Hiện tại tiếp diễn." },
  { id: 107, type: QuestionType.FILL_IN_BLANK, questionText: "The past form of \"rain\" is \"_ _ _ _ _ _ \".", correctAnswer: "rained", explanation: "Quá khứ của rain là rained." },
  { id: 108, type: QuestionType.MULTIPLE_CHOICE, questionText: "Choose the word(s) CLOSEST in meaning to \"holiday\"...", options: ["picnic", "camping", "vacation", "day-off"], correctAnswer: "vacation", explanation: "Holiday = Vacation." },
  { id: 109, type: QuestionType.FILL_IN_BLANK, questionText: "The party will be at my house from 5 o'clock _ _ 7 o'clock.", correctAnswer: "to", explanation: "From... to..." },
  { id: 110, type: QuestionType.MULTIPLE_CHOICE, questionText: "“Would you like to join us?” has the same meaning with", options: ["Why you join us?", "Will you join us?", "Don’t you join us?", "Thanks for joining us"], correctAnswer: "Will you join us?", explanation: "Lời mời." },
  { id: 111, type: QuestionType.FILL_IN_BLANK, questionText: "F_ _ _ play is important in sports.", correctAnswer: "air", explanation: "Fair play (Chơi đẹp)." },
  { id: 112, type: QuestionType.FILL_IN_BLANK, questionText: "_ ESTAURANT", correctAnswer: "R", explanation: "Restaurant (Nhà hàng)." },
  { id: 113, type: QuestionType.MULTIPLE_CHOICE, questionText: "Choose the word whose main stress pattern is not the same as that of the others:", options: ["neighbour", "actor", "programme", "design"], correctAnswer: "design", explanation: "Design nhấn âm 2. Các từ còn lại nhấn âm 1." },
  { id: 114, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["The rolling cheese", "up", "to 112 km", "travels", "an hour."], correctAnswer: "The rolling cheese travels up to 112 km an hour.", explanation: "Dịch: Miếng phô mai lăn di chuyển tới 112km/h." },
  { id: 115, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["to have", "a vacation", "interesting", "abroad.", "It's very"], correctAnswer: "It's very interesting to have a vacation abroad.", explanation: "Dịch: Rất thú vị khi đi nghỉ ở nước ngoài." },
  { id: 116, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["My mother", "morning.", "usually", "goes jogging", "in the early"], correctAnswer: "My mother usually goes jogging in the early morning.", explanation: "Dịch: Mẹ tôi thường đi bộ vào sáng sớm." },
  { id: 117, type: QuestionType.MULTIPLE_CHOICE, questionText: "Which word has different stress pattern?", options: ["appliance", "equation", "definitely", "aquarium"], correctAnswer: "definitely", explanation: "Definitely nhấn âm 1. Các từ còn lại nhấn âm 2." },
  { id: 118, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["to spend.", "less work and", "more money", "In the future,", "we will have"], correctAnswer: "In the future, we will have less work and more money to spend.", explanation: "Dịch: Trong tương lai, chúng ta sẽ làm ít hơn và có nhiều tiền hơn để tiêu." },
  { id: 119, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["danger?", "in", "Why", "are", "wild animals"], correctAnswer: "Why are wild animals in danger?", explanation: "Dịch: Tại sao động vật hoang dã lại gặp nguy hiểm?" },
  { id: 120, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["I can", "karate.", "do", "a", "little"], correctAnswer: "I can do a little karate.", explanation: "Dịch: Tôi biết một chút karate." },
  { id: 121, type: QuestionType.MULTIPLE_CHOICE, questionText: "Nam: How ... do you read an English magazine? - Mai: Every month.", options: ["often", "much", "many", "every"], correctAnswer: "often", explanation: "How often (Hỏi tần suất)." },
  { id: 122, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["the arrival of", "train.", "waiting for", "We are", "our uncle's"], correctAnswer: "We are waiting for the arrival of our uncle's train.", explanation: "Dịch: Chúng tôi đang đợi tàu của chú đến." },
  { id: 123, type: QuestionType.MULTIPLE_CHOICE, questionText: "Odd one out:", options: ["heavy", "height", "wide"], correctAnswer: "height", explanation: "Height (Danh từ). Còn lại là Tính từ." },
  { id: 124, type: QuestionType.FILL_IN_BLANK, questionText: "Brad and I are having _ _ _ best holiday of our lives!", correctAnswer: "the", explanation: "So sánh nhất: The best." },
  { id: 125, type: QuestionType.FILL_IN_BLANK, questionText: "- A: How _ _ _ _ _ does she go jogging? - B: Every evening.", correctAnswer: "often", explanation: "How often." },
  { id: 126, type: QuestionType.MULTIPLE_CHOICE, questionText: "... do I find a book in the library, please?", options: ["How", "What", "Why", "Which"], correctAnswer: "How", explanation: "How do I..." },
  { id: 127, type: QuestionType.FILL_IN_BLANK, questionText: "My brother and I _ _ _ going to visit our grandmother next weekend.", correctAnswer: "are", explanation: "We (My brother and I) are..." },
  { id: 128, type: QuestionType.FILL_IN_BLANK, questionText: "She is not doing _ _ _ _ _ _ _ _ in the garden, just walking with her dog.", correctAnswer: "anything", explanation: "Not doing anything." },
  { id: 129, type: QuestionType.MULTIPLE_CHOICE, questionText: "My house ... in 1998.", options: ["were build", "built", "was built"], correctAnswer: "was built", explanation: "Bị động quá khứ đơn (nhà được xây)." },
  { id: 130, type: QuestionType.FILL_IN_BLANK, questionText: "How long is the Golden Gate _ _ _ _ _ _ ?", imageUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/Thi_cac_cap/2019-2020/Tinh_Thanhpho/L6/anh/De1/Golden-Gate-Bridge.jpg"), correctAnswer: "Bridge", explanation: "Cầu Cổng Vàng." },
  { id: 131, type: QuestionType.MULTIPLE_CHOICE, questionText: "He will ... at the airport at 6 pm.", options: ["travel", "arrive", "come", "go"], correctAnswer: "arrive", explanation: "Arrive at (Đến)." },
  { id: 132, type: QuestionType.FILL_IN_BLANK, questionText: "I _ _ _ _ _ of being an astronaut some day.", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2013/11/21/635206401305633741_Audio.mp3"), correctAnswer: "dream", explanation: "Dream of (Mơ ước)." },
  { id: 133, type: QuestionType.MULTIPLE_CHOICE, questionText: "How are you today? - I'm very ..., thanks.", options: ["nice", "fine", "good", "well"], correctAnswer: "well", explanation: "I'm very well." },
  { id: 134, type: QuestionType.MULTIPLE_CHOICE, questionText: "He ... playing soccer.", options: ["enjoys", "interested in", "would like", "all are correct"], correctAnswer: "enjoys", explanation: "Enjoys + V-ing." },
  { id: 135, type: QuestionType.MULTIPLE_CHOICE, questionText: "A: What ... is her hair? - B: It's blonde.", options: ["colour", "number", "length", "this"], correctAnswer: "colour", explanation: "What colour." },
  { id: 136, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["does", "she", "What", "do?"], correctAnswer: "What does she do?", explanation: "Dịch: Cô ấy làm nghề gì?" },
  { id: 137, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["sometimes", "My father", "watches football", "matches", "on TV."], correctAnswer: "My father sometimes watches football matches on TV.", explanation: "Dịch: Bố tôi thỉnh thoảng xem bóng đá trên TV." },
  { id: 138, type: QuestionType.FILL_IN_BLANK, questionText: "It's very _ _ _ _ _ .", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2014/3/14/635303882705144272_Audio.mp3"), correctAnswer: "thick", explanation: "Nghe audio: Thick." },
  { id: 139, type: QuestionType.MULTIPLE_CHOICE, questionText: "Her classroom is on the ... floor.", options: ["one", "twice", "second", "two"], correctAnswer: "second", explanation: "Số thứ tự: Second floor." },
  { id: 140, type: QuestionType.MULTIPLE_CHOICE, questionText: "We say \"... picnic \".", options: ["have a", "have"], correctAnswer: "have a", explanation: "Have a picnic." },
  { id: 141, type: QuestionType.MULTIPLE_CHOICE, questionText: "How much ... this shirt?", options: ["does", "has", "is", "0"], correctAnswer: "is", explanation: "How much is..." },
  { id: 142, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["more money.", "We want", "less work", "to have", "and"], correctAnswer: "We want to have less work and more money.", explanation: "Dịch: Chúng tôi muốn làm ít việc hơn và có nhiều tiền hơn." },
  { id: 143, type: QuestionType.FILL_IN_BLANK, questionText: "I don't like durians. - Neither _ _ I.", correctAnswer: "do", explanation: "Neither do I (Tôi cũng không)." },
  { id: 144, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["to read", "books.", "don't have", "much time", "I"], correctAnswer: "I don't have much time to read books.", explanation: "Dịch: Tôi không có nhiều thời gian đọc sách." },
  { id: 145, type: QuestionType.FILL_IN_BLANK, questionText: "Books are _ _ _ _ _ _ good presents.", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2019/2/22/636864380946953891_Audio.mp3"), correctAnswer: "always", explanation: "Nghe audio: Always." },
  { id: 146, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["week do", "How many", "you play", "badminton?", "times a"], correctAnswer: "How many times a week do you play badminton?", explanation: "Dịch: Bạn chơi cầu lông bao nhiêu lần một tuần?" },
  { id: 147, type: QuestionType.FILL_IN_BLANK, questionText: "G_ AMMAR", correctAnswer: "R", explanation: "Grammar (Ngữ pháp)." },
  { id: 148, type: QuestionType.FILL_IN_BLANK, questionText: "T_ AFFIC", correctAnswer: "R", explanation: "Traffic (Giao thông)." },
  { id: 149, type: QuestionType.FILL_IN_BLANK, questionText: "Who are you going _ _ visit tomorrow?", correctAnswer: "to", explanation: "Going to visit." },
  { id: 150, type: QuestionType.MULTIPLE_CHOICE, questionText: "Choose the word that has different stress pattern:", options: ["your", "four", "hour", "pour"], correctAnswer: "hour", explanation: "Hour (h câm). Các từ khác bắt đầu bằng phụ âm." },
  { id: 151, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["How much", "of lemon", "does a glass", "juice cost?"], correctAnswer: "How much does a glass of lemon juice cost?", explanation: "Dịch: Một ly nước chanh giá bao nhiêu?" },
  { id: 152, type: QuestionType.FILL_IN_BLANK, questionText: "_ UIET", correctAnswer: "Q", explanation: "Quiet (Yên lặng)." },
  { id: 153, type: QuestionType.FILL_IN_BLANK, questionText: "“Glee” is my favourite mu_ _ _ _ _ TV series.", correctAnswer: "sical", explanation: "Musical (Ca nhạc)." },
  { id: 154, type: QuestionType.FILL_IN_BLANK, questionText: "Pelé became Football Player of the Century _ _ 1999.", correctAnswer: "in", explanation: "In + năm." },
  { id: 155, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["at Christmas.", "a gift", "My parents", "usually", "gives me"], correctAnswer: "My parents usually gives me a gift at Christmas.", explanation: "Dịch: Bố mẹ thường tặng quà cho tôi vào Giáng sinh." },
  { id: 156, type: QuestionType.FILL_IN_BLANK, questionText: "There is a scarf with red and blue _ _ _ _ _ _ _ on the snowman.", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2019/2/22/636864380252107113_Audio.mp3"), correctAnswer: "stripes", explanation: "Nghe audio: Stripes (kẻ sọc)." },
  { id: 157, type: QuestionType.FILL_IN_BLANK, questionText: "Brian can play the _ _ _ tar.", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2017/3/2/636240648754501722_Audio.mp3"), correctAnswer: "gui", explanation: "Guitar." },
  { id: 158, type: QuestionType.MULTIPLE_CHOICE, questionText: "That building is the ... of the two.", options: ["far", "farer", "farther", "farthest"], correctAnswer: "farther", explanation: "So sánh 2 vật -> Farther." },
  { id: 159, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["does", "do?", "mother", "What", "your"], correctAnswer: "What does your mother do?", explanation: "Dịch: Mẹ bạn làm nghề gì?" },
  { id: 160, type: QuestionType.FILL_IN_BLANK, questionText: "PACK_ T", correctAnswer: "E", explanation: "Packet (Gói)." },
  { id: 161, type: QuestionType.FILL_IN_BLANK, questionText: "My dream house is _ _ _ _ _ _ _ _ _ _ different.", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/Thi_cac_cap/2019-2020/Tinh_Thanhpho/L6/nghe/De1/2/17.mp3"), correctAnswer: "completely", explanation: "Nghe audio: Completely." },
  { id: 162, type: QuestionType.FILL_IN_BLANK, questionText: "CHO_ OLATE", correctAnswer: "C", explanation: "Chocolate." },
  { id: 163, type: QuestionType.MULTIPLE_CHOICE, questionText: "My sister doesn't like volleyball at all. She ... plays volleyball.", options: ["sometimes", "always", "never", "often"], correctAnswer: "never", explanation: "Doesn't like at all (không thích chút nào) -> Never." },
  { id: 164, type: QuestionType.FILL_IN_BLANK, questionText: "He won't be _ _ _ _ to pass the exam because he doesn't study hard.", correctAnswer: "able", explanation: "Be able to (Có thể)." },
  { id: 165, type: QuestionType.MULTIPLE_CHOICE, questionText: "Vietnam Independence Day is on ...", options: ["April the thirtieth", "September the second", "March the tenth", "November the twentieth"], correctAnswer: "September the second", explanation: "2/9 (Quốc khánh)." },
  { id: 166, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["Nick doesn't.", "sandwich", "I want a", "but my friend"], correctAnswer: "I want a sandwich but my friend Nick doesn't.", explanation: "Dịch: Tôi muốn một cái bánh mì kẹp nhưng bạn Nick thì không." },
  { id: 167, type: QuestionType.FILL_IN_BLANK, questionText: "My daughter goes jog_ _ _ _ everyday.", correctAnswer: "ging", explanation: "Jogging (Chạy bộ)." },
  { id: 168, type: QuestionType.FILL_IN_BLANK, questionText: "A_ WAYS", correctAnswer: "L", explanation: "Always (Luôn luôn)." },
  { id: 169, type: QuestionType.FILL_IN_BLANK, questionText: "Summer is on its _ _ _ .", correctAnswer: "way", explanation: "On its way (Đang đến)." },
  { id: 170, type: QuestionType.FILL_IN_BLANK, questionText: "The Earth is the third _ _ _ _ _ _ from the Sun in the solar system.", correctAnswer: "planet", explanation: "Planet (Hành tinh)." },
  { id: 171, type: QuestionType.FILL_IN_BLANK, questionText: "April, June and September have _ _ _ _ _ _ days.", correctAnswer: "thirty", explanation: "30 ngày." },
  { id: 172, type: QuestionType.FILL_IN_BLANK, questionText: "Let's go _ _ foot to the cinema.", correctAnswer: "on", explanation: "On foot (Đi bộ)." },
  { id: 173, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["regarded as", "the best footballer", "all time.", "Pelé is widely", "of"], correctAnswer: "Pelé is widely regarded as the best footballer of all time.", explanation: "Dịch: Pelé được coi là cầu thủ giỏi nhất mọi thời đại." },
  { id: 174, type: QuestionType.MULTIPLE_CHOICE, questionText: "... you swim when you were ten?", options: ["Can", "Could", "May", "Might"], correctAnswer: "Could", explanation: "Quá khứ -> Could." },
  { id: 175, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["Which", "he", "language", "does", "speak?"], correctAnswer: "Which language does he speak?", explanation: "Dịch: Anh ấy nói ngôn ngữ nào?" },
  { id: 176, type: QuestionType.FILL_IN_BLANK, questionText: "What's your _ _ _ _ of birth? - June 23rd.", correctAnswer: "date", explanation: "Date of birth (Ngày sinh)." },
  { id: 177, type: QuestionType.FILL_IN_BLANK, questionText: "I have never seen a more interesting film _ _ _ _ \"The King's speech\".", correctAnswer: "than", explanation: "So sánh hơn: More ... than." },
  { id: 178, type: QuestionType.FILL_IN_BLANK, questionText: "They will go _ _ _ _ _ _ _ now.", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2017/3/2/636240648441687355_Audio.mp3"), correctAnswer: "bowling", explanation: "Nghe audio: Bowling." },
  { id: 179, type: QuestionType.MULTIPLE_CHOICE, questionText: "She doesn't....", options: ["like drink", "drinking", "want to drink", "need drink"], correctAnswer: "want to drink", explanation: "Doesn't want to drink (cấu trúc đúng)." },
  { id: 180, type: QuestionType.MULTIPLE_CHOICE, questionText: "Choose the word(s) CLOSEST in meaning to \"cheerful\":", options: ["stressful", "angry", "peaceful", "happy"], correctAnswer: "happy", explanation: "Cheerful = Happy (Vui vẻ)." },
  { id: 181, type: QuestionType.MULTIPLE_CHOICE, questionText: "How much pork does she need? - ....", options: ["A tube", "A kilo", "A packet", "A dozen"], correctAnswer: "A kilo", explanation: "Thịt lợn tính bằng Kilo." },
  { id: 182, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["clean.", "to keep", "important", "the environment", "It’s very"], correctAnswer: "It’s very important to keep the environment clean.", explanation: "Dịch: Rất quan trọng để giữ môi trường sạch sẽ." },
  { id: 183, type: QuestionType.MULTIPLE_CHOICE, questionText: "The question sounds very ... .", options: ["easy", "easily", "ease", "at ease"], correctAnswer: "easy", explanation: "Sounds + adj." },
  { id: 184, type: QuestionType.FILL_IN_BLANK, questionText: "E_ GHT", correctAnswer: "I", explanation: "Eight (Số 8)." },
  { id: 185, type: QuestionType.FILL_IN_BLANK, questionText: "My gr_ _ _ father often helps my parents on the farm.", correctAnswer: "and", explanation: "Grandfather (Ông)." },
  { id: 186, type: QuestionType.MULTIPLE_CHOICE, questionText: "He is a weight.... He is very strong.", options: ["lighter", "lifter", "man", "waiter"], correctAnswer: "lifter", explanation: "Weightlifter (Vận động viên cử tạ)." },
  { id: 187, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["has", "The weather", "in Stockholm", "perfect.", "been"], correctAnswer: "The weather in Stockholm has been perfect.", explanation: "Dịch: Thời tiết ở Stockholm rất hoàn hảo." },
  { id: 188, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["his party.", "Shayne", "wants to", "some friends to", "invite"], correctAnswer: "Shayne wants to invite some friends to his party.", explanation: "Dịch: Shayne muốn mời bạn đến tiệc." },
  { id: 189, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["Which sports", "you play?", "do"], correctAnswer: "Which sports do you play?", explanation: "Dịch: Bạn chơi môn thể thao nào?" },
  { id: 190, type: QuestionType.FILL_IN_BLANK, questionText: "She always gets _ _ at seven o'clock in the morning.", correctAnswer: "up", explanation: "Gets up (Thức dậy)." },
  { id: 191, type: QuestionType.FILL_IN_BLANK, questionText: "TRAV_ L", correctAnswer: "E", explanation: "Travel (Du lịch)." },
  { id: 192, type: QuestionType.FILL_IN_BLANK, questionText: "In Scotland, the _ _ _ _ _ footer on New Year's Day is believed to decide the family's luck.", correctAnswer: "first", explanation: "First footer (Người xông đất)." },
  { id: 193, type: QuestionType.FILL_IN_BLANK, questionText: "She _ _ _ _ aerobics and plays badminton everyday.", correctAnswer: "does", explanation: "Does aerobics." },
  { id: 194, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["in", "She", "Hanoi.", "a small village", "lives in"], correctAnswer: "She lives in a small village in Hanoi.", explanation: "Dịch: Cô ấy sống trong một ngôi làng nhỏ ở Hà Nội." },
  { id: 195, type: QuestionType.MULTIPLE_CHOICE, questionText: "How long will it ... to get there?", options: ["cost", "lose", "make", "take"], correctAnswer: "take", explanation: "Take time (Tốn thời gian)." },
  { id: 196, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["Health is", "important", "everyone.", "to", "very"], correctAnswer: "Health is very important to everyone.", explanation: "Dịch: Sức khỏe rất quan trọng với mọi người." },
  { id: 197, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["but there isn't", "the bottle.", "to make a cake", "Mom wants", "any milk in"], correctAnswer: "Mom wants to make a cake but there isn't any milk in the bottle.", explanation: "Dịch: Mẹ muốn làm bánh nhưng không còn sữa trong chai." },
  { id: 198, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["next", "Their house", "to", "a river.", "is"], correctAnswer: "Their house is next to a river.", explanation: "Dịch: Nhà họ ở cạnh sông." },
  { id: 199, type: QuestionType.MULTIPLE_CHOICE, questionText: "... make note and brainstorm ideas.", options: ["Let's", "Shall", "Why", "What about"], correctAnswer: "Let's", explanation: "Let's + V." },
  { id: 200, type: QuestionType.FILL_IN_BLANK, questionText: "\"Follow Us\" is an English learning program _ _ _ young learners on VTV7.", correctAnswer: "for", explanation: "Program for (Chương trình dành cho)." }
];

        // --- COMPONENTS ---

        const Button = ({ children, variant = 'primary', size = 'md', className = '', ...props }) => {
             const baseStyles = "inline-flex items-center justify-center font-bold transition-all duration-200 rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-sm transform active:scale-95";
             const variants = {
                primary: "bg-blue-600 hover:bg-blue-700 text-white shadow-blue-500/30 focus:ring-blue-500",
                secondary: "bg-emerald-500 hover:bg-emerald-600 text-white shadow-emerald-500/30 focus:ring-emerald-500",
                danger: "bg-rose-500 hover:bg-rose-600 text-white shadow-rose-500/30 focus:ring-rose-500",
                outline: "bg-white border-2 border-slate-300 text-slate-600 hover:border-blue-500 hover:text-blue-600 focus:ring-slate-400"
             };
             const sizes = { sm: "px-4 py-1.5 text-sm", md: "px-6 py-3 text-base", lg: "px-8 py-4 text-lg" };
             return <button className={`${baseStyles} ${variants[variant]} ${sizes[size]} ${className}`} {...props}>{children}</button>;
        };

        const AudioPlayer = ({ src }) => {
            const audioRef = useRef(null);
            const [isPlaying, setIsPlaying] = useState(false);
            const togglePlay = () => { if (audioRef.current) { if (isPlaying) audioRef.current.pause(); else audioRef.current.play(); setIsPlaying(!isPlaying); } };
            return (
                <div className="flex items-center gap-3 bg-slate-100 p-3 rounded-lg border border-slate-200">
                    <button type="button" onClick={togglePlay} className="flex-shrink-0 w-10 h-10 flex items-center justify-center bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors">{isPlaying ? '❚❚' : '▶'}</button>
                    <span className="text-sm font-semibold text-slate-600 uppercase tracking-wide">Nghe câu hỏi</span>
                    <audio ref={audioRef} src={src} onEnded={() => setIsPlaying(false)} className="hidden" />
                </div>
            );
        };

        const StartScreen = ({ onStart }) => {
            const [name, setName] = useState('');
            const handleSubmit = (e) => { e.preventDefault(); if (name.trim()) onStart(name.trim()); };
            return (
                <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-cyan-500 to-blue-600 p-4">
                    <div className="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-center animate-slide-up">
                        <div className="mb-8">
                            <h1 className="text-3xl font-extrabold text-slate-800 mb-2">BỘ ĐỀ ÔN IOE K6 SỐ: 07</h1>
                            <p className="text-slate-500">Luyện thi tiếng Anh IOE cùng AI Master</p>
                        </div>
                        <form onSubmit={handleSubmit} className="space-y-6">
                            <div className="text-left"><label className="block text-sm font-medium text-slate-700 mb-2">Tên của bạn</label><input type="text" value={name} onChange={(e) => setName(e.target.value)} placeholder="Nhập tên..." className="w-full px-4 py-3 rounded-xl border border-slate-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all" required /></div>
                            <Button type="submit" className="w-full" size="lg" disabled={!name.trim()}>Bắt đầu chơi</Button>
                        </form>
                    </div>
                </div>
            );
        };

        const QuestionCard = ({ question, onAnswer, isAnswered, userAnswer }) => {
            const [inputVal, setInputVal] = useState('');
            const [selectedParts, setSelectedParts] = useState([]);
            const [showHint, setShowHint] = useState(false);
            const [hintText, setHintText] = useState('');

            useEffect(() => { 
                setInputVal(''); 
                setSelectedParts([]); 
                setShowHint(false);
                setHintText('');
            }, [question.id]);

            const normalize = (str) => str ? str.replace(/[.,!?;:'"]/g, '').replace(/\s+/g, ' ').trim().toLowerCase() : "";
            const isCorrect = () => userAnswer && normalize(userAnswer) === normalize(question.correctAnswer);

            const handleMCSelect = (opt) => !isAnswered && onAnswer(opt);
            const handleInputSubmit = (e) => { e.preventDefault(); if (!isAnswered && inputVal.trim()) onAnswer(inputVal.trim()); };
            const handlePartClick = (part) => { if (!isAnswered) setSelectedParts(prev => prev.includes(part) ? prev.filter(p => p !== part) : [...prev, part]); };
            const handleRearrangeSubmit = () => !isAnswered && selectedParts.length > 0 && onAnswer(selectedParts.join(' '));

            const generateHint = () => {
                if (hintText) return;
                let text = '';
                
                // Gợi ý kỹ thuật
                if (question.type === QuestionType.MULTIPLE_CHOICE) {
                    const wrongOptions = question.options?.filter(opt => opt !== question.correctAnswer) || [];
                    if (wrongOptions.length > 0) {
                         const randomWrong = wrongOptions[Math.floor(Math.random() * wrongOptions.length)];
                         text = `Gợi ý 50/50: Loại bỏ đáp án "${randomWrong}".`;
                    }
                } else if (question.type === QuestionType.FILL_IN_BLANK) {
                     const answer = question.correctAnswer.trim();
                     text = `Từ này có ${answer.length} chữ cái. Bắt đầu bằng "${answer.charAt(0).toUpperCase()}...".`;
                } else {
                     const words = question.correctAnswer.split(' ');
                     const hintPhrase = words.slice(0, Math.max(1, Math.floor(words.length/2))).join(' ');
                     text = `Gợi ý: Câu bắt đầu bằng "${hintPhrase}..."`;
                }

                // Gợi ý nghĩa tiếng Việt từ Explanation
                if (question.explanation) {
                    const vietnameseMatch = question.explanation.match(/Dịch:\s*([^.]+)/) || question.explanation.match(/\(([^)]+)\)/);
                    if (vietnameseMatch) {
                        text += `\n\nNghĩa: ${vietnameseMatch[1]}`;
                    }
                }
                
                setHintText(text);
            };

            return (
                <div className="w-full max-w-3xl mx-auto mb-8 animate-fade-in">
                    <div className="bg-white rounded-2xl shadow-xl overflow-hidden border border-slate-100">
                        <div className="bg-slate-50 px-6 py-4 border-b border-slate-100 flex justify-between items-center">
                            <div className="flex items-center gap-3">
                                <span className="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-extrabold uppercase">{question.type.replace(/_/g, ' ')}</span>
                                {!isAnswered && (
                                    <button onClick={() => { generateHint(); setShowHint(!showHint); }} className="px-3 py-1 text-xs font-bold border rounded-full bg-yellow-50 text-yellow-600 border-yellow-200 hover:bg-yellow-100">
                                        {showHint ? 'Ẩn Gợi ý' : 'Gợi ý'}
                                    </button>
                                )}
                            </div>
                            <span className="text-xs font-bold text-slate-300">ID: {question.id}</span>
                        </div>
                        <div className="p-6 sm:p-10">
                            <div className="mb-6 space-y-4">
                                {question.imageUrl && <div className="flex justify-center"><img src={question.imageUrl} className="max-h-72 rounded-lg shadow-md" onError={(e) => e.target.style.display = 'none'} /></div>}
                                {question.audioUrl && <div className="bg-blue-50 p-4 rounded-xl"><AudioPlayer src={question.audioUrl} /></div>}
                            </div>

                            {showHint && !isAnswered && (
                                <div className="mb-6 bg-yellow-50 p-3 rounded-lg text-sm text-yellow-800 border border-yellow-200 whitespace-pre-wrap">
                                    <strong>Gợi ý:</strong> {hintText}
                                </div>
                            )}

                            <h2 className="text-xl sm:text-2xl font-bold text-slate-800 mb-6">{question.questionText}</h2>
                            
                            {question.type === QuestionType.MULTIPLE_CHOICE && (
                                <div className="grid grid-cols-1 gap-3">
                                    {question.options?.map((opt, idx) => (
                                        <button key={idx} onClick={() => handleMCSelect(opt)} disabled={isAnswered} className={`w-full p-4 rounded-xl text-left border-2 transition-all ${isAnswered ? (opt === question.correctAnswer ? 'bg-green-100 border-green-500 text-green-900' : opt === userAnswer ? 'bg-red-100 border-red-500 text-red-900' : 'bg-slate-50 opacity-60') : 'bg-white hover:border-blue-400 hover:shadow-md'}`}>
                                            <span className="font-bold mr-4 w-6 inline-block">{String.fromCharCode(65 + idx)}</span>{opt}
                                        </button>
                                    ))}
                                </div>
                            )}

                            {question.type === QuestionType.FILL_IN_BLANK && (
                                <form onSubmit={handleInputSubmit} className="flex flex-col gap-2">
                                    <div className="flex gap-3">
                                        <input type="text" value={isAnswered ? (userAnswer || '') : inputVal} onChange={(e) => setInputVal(e.target.value)} disabled={isAnswered} className={`flex-1 p-4 rounded-xl border-2 text-lg outline-none ${isAnswered ? (isCorrect() ? 'border-green-500 bg-green-50' : 'border-red-500 bg-red-50') : 'border-slate-200 focus:border-blue-500'}`} placeholder="Nhập đáp án..." />
                                        {!isAnswered && <Button type="submit">Trả lời</Button>}
                                    </div>
                                    {!isAnswered && <div className="text-xs text-slate-400 text-right">Đã nhập: {inputVal.length} ký tự</div>}
                                </form>
                            )}

                            {question.type === QuestionType.REARRANGE && (
                                <div className="space-y-6">
                                    <div className="flex flex-wrap gap-3 p-4 bg-slate-50 rounded-xl border shadow-inner min-h-[60px]">
                                        {question.rearrangeParts?.map((part, idx) => (
                                            <button key={idx} onClick={() => handlePartClick(part)} disabled={isAnswered || selectedParts.includes(part)} className={`px-4 py-2 rounded-lg bg-white border shadow-sm transition-all active:scale-95 ${selectedParts.includes(part) ? 'opacity-0 pointer-events-none' : 'hover:border-blue-400'}`}>{part}</button>
                                        ))}
                                    </div>
                                    <div className={`min-h-[80px] p-4 rounded-xl border-2 border-dashed flex flex-wrap gap-2 items-center ${isAnswered ? (isCorrect() ? 'border-green-500 bg-green-50/50' : 'border-red-500 bg-red-50/50') : 'border-slate-300 bg-white'}`}>
                                         {selectedParts.length === 0 && !isAnswered && <div className="w-full text-center text-slate-400 italic">Bấm từ để sắp xếp...</div>}
                                        {selectedParts.map((part, idx) => <button key={idx} onClick={() => handlePartClick(part)} disabled={isAnswered} className="bg-blue-100 text-blue-900 px-3 py-1.5 rounded-lg border border-blue-200 font-medium shadow-sm hover:bg-red-100 hover:text-red-800 transition-colors">{part}</button>)}
                                    </div>
                                    {!isAnswered && <div className="flex justify-end"><Button onClick={handleRearrangeSubmit} disabled={selectedParts.length === 0}>Xác nhận</Button></div>}
                                </div>
                            )}

                            {isAnswered && (
                                <div className={`mt-8 p-6 rounded-xl border-l-4 shadow-sm animate-fade-in ${isCorrect() ? 'bg-green-50 border-green-500' : 'bg-red-50 border-red-500'}`}>
                                    <div className="flex items-start gap-4">
                                        <div className={`w-8 h-8 rounded-full flex items-center justify-center shrink-0 text-white font-bold ${isCorrect() ? 'bg-green-500' : 'bg-red-500'}`}>{isCorrect() ? '✓' : '✕'}</div>
                                        <div>
                                            <h3 className={`font-bold text-xl mb-2 ${isCorrect() ? 'text-green-800' : 'text-red-800'}`}>{isCorrect() ? 'Chính xác!' : 'Chưa chính xác'}</h3>
                                            {!isCorrect() && <div className="mb-2"><span className="text-red-600 font-bold text-sm uppercase">Đáp án đúng:</span> <span className="font-bold text-slate-800 ml-2">{question.correctAnswer}</span></div>}
                                            <div className="bg-white/60 p-3 rounded-lg text-slate-700 text-sm"><span className="font-bold text-blue-600 block mb-1">Giải thích:</span>{question.explanation}</div>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const QuestionGrid = ({ questions, userAnswers, currentIndex, onJump, onClose }) => {
            const getStatusColor = (q, idx) => {
                const ans = userAnswers.find(a => a.questionId === q.id);
                if (idx === currentIndex) return "ring-2 ring-blue-500 border-blue-500 text-blue-600 bg-white";
                if (!ans) return "bg-slate-100 text-slate-400 border-transparent";
                return ans.isCorrect ? "bg-green-500 text-white border-green-600" : "bg-red-500 text-white border-red-600";
            };
            return (
                <div className="fixed inset-0 z-50 bg-slate-900/50 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in">
                    <div className="bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col overflow-hidden animate-slide-up">
                        <div className="p-6 border-b flex justify-between items-center bg-slate-50">
                            <div><h2 className="text-xl font-bold">Danh sách câu hỏi</h2><p className="text-sm text-slate-500">Đã làm: {userAnswers.length} / {questions.length}</p></div>
                            <button onClick={onClose} className="p-2 hover:bg-slate-200 rounded-full">✕</button>
                        </div>
                        <div className="flex-1 overflow-y-auto p-6 custom-scrollbar"><div className="grid grid-cols-5 sm:grid-cols-10 gap-3">{questions.map((q, idx) => (<button key={q.id} onClick={() => { onJump(idx); onClose(); }} className={`h-10 w-10 rounded-lg font-bold text-sm border transition-all ${getStatusColor(q, idx)}`}>{q.id}</button>))}</div></div>
                        <div className="p-4 bg-slate-50 border-t text-xs text-slate-500 flex gap-4 justify-center flex-wrap"><div className="flex items-center gap-2"><span className="w-3 h-3 bg-green-500 rounded-full"></span> Đúng</div><div className="flex items-center gap-2"><span className="w-3 h-3 bg-red-500 rounded-full"></span> Sai</div><div className="flex items-center gap-2"><span className="w-3 h-3 ring-2 ring-blue-500 rounded-full bg-white"></span> Đang làm</div><div className="flex items-center gap-2"><span className="w-3 h-3 bg-slate-200 rounded-full"></span> Chưa làm</div></div>
                    </div>
                </div>
            );
        }

        const ResultScreen = ({ userName, userAnswers, onRetryAll, onRetryWrong }) => {
            const correct = userAnswers.filter(a => a.isCorrect).length;
            const total = userAnswers.length;
            const percent = total > 0 ? Math.round((correct/total)*100) : 0;
            const hasWrong = correct < total;
            const score = correct * 10;

            return (
                <div className="min-h-screen flex flex-col items-center justify-center p-4 animate-fade-in bg-slate-50">
                    <div className="bg-white rounded-3xl shadow-xl p-8 max-w-2xl w-full text-center">
                        <div className="mb-6 relative inline-block">
                            <svg className="w-32 h-32 transform -rotate-90" viewBox="0 0 120 120">
                                <circle cx="60" cy="60" r="54" fill="none" stroke="#e2e8f0" strokeWidth="12" />
                                <circle cx="60" cy="60" r="54" fill="none" stroke={percent >= 80 ? '#10b981' : percent >= 50 ? '#3b82f6' : '#ef4444'} strokeWidth="12" strokeDasharray="339.292" strokeDashoffset={339.292 - (339.292 * percent) / 100} className="transition-all duration-1000 ease-out" />
                            </svg>
                            <div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-3xl font-bold text-slate-800">{percent}%</div>
                        </div>
                        <h2 className="text-2xl font-bold text-slate-800 mb-2">Hoàn thành bài thi!</h2>
                        <p className="text-slate-600 mb-4">Chúc mừng <b>{userName}</b></p>
                        
                        <div className="mb-8 inline-flex items-baseline gap-2 bg-blue-50 px-6 py-2 rounded-2xl border border-blue-100">
                             <span className="text-4xl font-extrabold text-blue-600">{score}</span>
                             <span className="text-lg text-slate-500 font-bold">điểm</span>
                        </div>

                        <div className="grid grid-cols-2 gap-4 mb-8 bg-slate-50 p-4 rounded-xl">
                            <div><div className="text-2xl font-bold text-green-600">{correct}</div><div className="text-xs uppercase text-slate-500 font-bold">Đúng</div></div>
                            <div className="border-l border-slate-200"><div className="text-2xl font-bold text-red-500">{total - correct}</div><div className="text-xs uppercase text-slate-500 font-bold">Sai</div></div>
                        </div>
                        {hasWrong && (
                            <div className="text-left mb-6 max-h-48 overflow-y-auto custom-scrollbar border-t border-b py-4">
                                <h3 className="text-xs font-bold text-slate-400 uppercase mb-2">Cần xem lại</h3>
                                <div className="space-y-2">
                                    {userAnswers.filter(a => !a.isCorrect).map((ans, i) => {
                                        const q = QUIZ_DATA.find(x => x.id === ans.questionId);
                                        return q ? <div key={i} className="text-sm p-2 bg-red-50 rounded"><span className="font-bold text-red-500 mr-2">#{q.id}</span> {q.questionText} <br/><span className="text-xs text-slate-500">Đáp án: {q.correctAnswer}</span></div> : null;
                                    })}
                                </div>
                            </div>
                        )}
                        <div className="flex gap-4 justify-center">
                            <Button onClick={onRetryAll}>Chơi lại từ đầu</Button>
                            {hasWrong && <Button onClick={onRetryWrong} variant="danger">Làm lại câu sai</Button>}
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [gameState, setGameState] = useState(GameState.START);
            const [userName, setUserName] = useState('');
            const [activeQuestions, setActiveQuestions] = useState([]);
            const [currentIndex, setCurrentIndex] = useState(0);
            const [userAnswers, setUserAnswers] = useState([]);
            const [showGrid, setShowGrid] = useState(false);

            const handleStart = (name) => { setUserName(name); startSession(QUIZ_DATA); };
            const startSession = (questions) => { setActiveQuestions(questions); setCurrentIndex(0); setUserAnswers([]); setGameState(GameState.PLAYING); };
            
            const handleAnswer = (response) => {
                const q = activeQuestions[currentIndex];
                const normalize = (s) => s.replace(/[.,!?;:'"]/g, '').replace(/\s+/g, ' ').trim().toLowerCase();
                const isCorrect = normalize(response) === normalize(q.correctAnswer);
                setUserAnswers(prev => [...prev.filter(a => a.questionId !== q.id), { questionId: q.id, userResponse: response, isCorrect }]);
            };

            const handleNext = () => currentIndex < activeQuestions.length - 1 && setCurrentIndex(prev => prev + 1);
            const handlePrev = () => currentIndex > 0 && setCurrentIndex(prev => prev - 1);
            const handleSkip = () => handleNext();
            const handleFinish = () => setGameState(GameState.FINISHED);
            
            const handleRetryWrong = () => {
                const wrongIds = userAnswers.filter(a => !a.isCorrect).map(a => a.questionId);
                startSession(QUIZ_DATA.filter(q => wrongIds.includes(q.id)));
            };

            if (gameState === GameState.START) return <StartScreen onStart={handleStart} />;
            if (gameState === GameState.FINISHED) return <ResultScreen userName={userName} userAnswers={userAnswers} onRetryAll={() => startSession(QUIZ_DATA)} onRetryWrong={handleRetryWrong} />;

            const currentQ = activeQuestions[currentIndex];
            const answer = userAnswers.find(a => a.questionId === currentQ.id);
            const isAnswered = !!answer;
            const isLast = currentIndex === activeQuestions.length - 1;
            const allAnswered = userAnswers.length === activeQuestions.length;
            
            // Calculate Score: 10 points per correct answer
            const currentScore = userAnswers.filter(a => a.isCorrect).length * 10;

            return (
                <div className="min-h-screen bg-slate-100 flex flex-col items-center py-8 px-4 pb-32 relative">
                    <div className="w-full max-w-3xl flex justify-between items-center mb-6 bg-white p-4 rounded-xl shadow-sm">
                        <div className="flex flex-col"><span className="text-xs font-bold text-slate-400 uppercase">Người chơi</span><span className="font-bold text-slate-700">{userName}</span></div>
                        
                        <div className="flex flex-col items-center px-4 border-l border-r border-slate-100">
                            <span className="text-xs font-bold text-slate-400 uppercase">Điểm số</span>
                            <span className="font-bold text-emerald-600 text-xl">{currentScore}</span>
                        </div>

                        <button onClick={() => setShowGrid(true)} className="flex items-center gap-2 px-3 py-1.5 bg-slate-100 hover:bg-slate-200 rounded-lg text-sm font-bold text-slate-600">Danh sách</button>
                        
                        <div className="flex flex-col items-end"><span className="text-xs font-bold text-slate-400 uppercase">Tiến độ</span><span className="font-bold text-blue-600 text-xl">{currentIndex + 1} <span className="text-slate-400 text-sm">/ {activeQuestions.length}</span></span></div>
                    </div>
                    <div className="w-full max-w-3xl bg-slate-200 rounded-full h-2 mb-8 overflow-hidden"><div className="bg-blue-600 h-full transition-all duration-300 ease-out" style={{ width: `${(userAnswers.length / activeQuestions.length) * 100}%` }}></div></div>
                    
                    <QuestionCard question={currentQ} onAnswer={handleAnswer} isAnswered={isAnswered} userAnswer={answer?.userResponse} />
                    
                    <div className="fixed bottom-0 left-0 right-0 p-4 bg-white border-t shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] z-10">
                        <div className="w-full max-w-3xl mx-auto flex justify-between items-center gap-4">
                            <Button onClick={handlePrev} variant="outline" disabled={currentIndex === 0} className="w-24">← Trước</Button>
                            <div className="flex-1 flex justify-center gap-3">
                                {isAnswered ? (
                                    <>
                                        {!isLast && <Button onClick={handleNext} size="md" className="shadow-xl shadow-blue-500/20 animate-bounce-short">Câu tiếp theo →</Button>}
                                        <Button onClick={handleFinish} variant={allAnswered ? "secondary" : "danger"}>Nộp bài</Button>
                                    </>
                                ) : <Button onClick={handleSkip} variant="outline" className="text-slate-400 hover:text-slate-600">Bỏ qua</Button>}
                            </div>
                            <Button onClick={handleNext} variant="outline" disabled={isLast} className={`w-24 ${isAnswered ? 'opacity-0 pointer-events-none hidden sm:flex' : ''}`}>Sau →</Button>
                        </div>
                    </div>
                    {showGrid && <QuestionGrid questions={activeQuestions} userAnswers={userAnswers} currentIndex={currentIndex} onJump={setCurrentIndex} onClose={() => setShowGrid(false)} />}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>